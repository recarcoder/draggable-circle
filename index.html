<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <h1><a class="link" href="https://recarcoder.github.io/imgweb/">home</a></h1>
  <div class="cir circle">
  </div>
  <h1>touch and move the ball</h1>
  <style type="text/css" media="all">
    h1 {
      color: rgba(200,200,200,0.814);
    }
    .cir {
      margin: 10px;
      padding: 0;
      border-radius: 10px;
      height: 100px;
      width: 100px;
      border: 3px solid rgba(200,201,201,0.714);
      transition: transform 0.04s ease-out;
    }
    .link {
      float: right;
      margin: 10px;
      color: green;
      padding: 10px;
      border: 1px solid lightgrey;
      text-decoration: none;
    }
  </style>
  <script type="text/javascript" charset="utf-8">
    var circle = document.querySelector('.cir');
    circle.addEventListener('touchstart', function start(ev) {
      circle.style.backgroundColor = 'rgba(200,125,50,0.85)';
      circle.style.position = 'absolute';
      let y = ev.touches[0].clientY-70;
      let x = ev.touches[0].clientX-70;
      circle.style.transform = "translate("+x+'px'+","+y+'px'+")";
    });

    circle.addEventListener('touchmove', function move(cv) {
      let y = cv.touches[0].clientY-70;
      let x = cv.touches[0].clientX-70;
      document.querySelector('.cir').style.transform = "translate("+x+'px'+','+y+'px'+")";
    });
    document.querySelector('.cir').addEventListener('touchend', function sl(en) {
      document.querySelector('.cir').style.boxShadow = "none";;
      document.querySelector('.cir').style.backgroundColor = 'transparent';
      let ix = en.changedTouches[0].clientX;
      let iy = en.changedTouches[0].clientY;
      console.log(circle.style);
      var caX = window.visualViewport.width-120;
      var caY = window.visualViewport.height-120;
      if (iy <= window.visualViewport.height/2 && ix <= window.visualViewport.width/2) {
        circle.style.transform = "translate(20px,20px)";
      }
      if (iy <= window.visualViewport.height/2 && ix > window.visualViewport.width/2) {
        circle.style.transform = "translate("+caX+"px,"+"20px)";
      }
      if (iy > window.visualViewport.height/2 && ix <= window.visualViewport.width/2) {
        circle.style.transform = "translate(20px,"+caY+"px)";
      }
      if (iy > window.visualViewport.height/2 && ix > window.visualViewport.width/2) {
        circle.style.transform = "translate("+caX+'px,'+caY+"px)";
      }
    });
  </script>
</body>
</html>